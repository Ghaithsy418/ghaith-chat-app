# Ghaith Chat Application - Visual Project Structure

## 🌟 Application Architecture

This visualization provides a comprehensive overview of the application's architecture, component relationships, and data flow patterns.

## 📊 Component Hierarchy

```
┌─────────────────────────────────────────────────────────────────────────┐
│                             RootLayout                                   │
│  ┌─────────────────────────────────────────────────────────────────────┐ │
│  │                       NextIntlClientProvider                        │ │
│  │  ┌─────────────────────────────────────────────────────────────────┐│ │
│  │  │                        UserProvider                            ││ │
│  │  │  ┌─────────────────────────────────────────────────────────────┐││ │
│  │  │  │                     SettingsProvider                       ││││ │
│  │  │  │  ┌─────────────────────────────────────────────────────────┐          ││││
│  │  │  │  │                    ChattingProvider                    ││││ │
│  │  │  │  │                                                        ││││ │
│  │  │  │  │                                                        ││││ │
│  │  │  │  │  ┌──────────────┐    ┌──────────┐    ┌─────────────┐  ││││ │
│  │  │  │  │  │              │    │          │    │             │  ││││ │
│  │  │  │  │  │  Login Page  │    │ Home Page│    │ Signup Page │  ││││ │
│  │  │  │  │  │              │    │          │    │             │  ││││ │
│  │  │  │  │  └──────────────┘    └──────────┘    └─────────────┘  ││││ │
│  │  │  │  │                           │                            ││││ │
│  │  │  │  │                           ▼                            ││││ │
│  │  │  │  │                   ┌──────────────┐                     ││││ │
│  │  │  │  │                   │              │                     ││││ │
│  │  │  │  │                   │WrapperComponent                    ││││ │
│  │  │  │  │                   │              │                     ││││ │
│  │  │  │  │                   └──────┬───────┘                     ││││ │
│  │  │  │  │                          │                             ││││ │
│  │  │  │  │            ┌─────────────┼─────────────┐              ││││ │
│  │  │  │  │            │             │             │              ││││ │
│  │  │  │  │            ▼             ▼             ▼              ││││ │
│  │  │  │  │     ┌────────┐     ┌─────────┐    ┌─────────┐         ││││ │
│  │  │  │  │     │        │     │         │    │         │         ││││ │
│  │  │  │  │     │  List  │     │  Chat   │    │ Details │         ││││ │
│  │  │  │  │     │        │     │         │    │         │         ││││ │
│  │  │  │  │     └────────┘     └─────────┘    └─────────┘         ││││ │
│  │  │  │  │                                                        ││││ │
│  │  │  │  └─────────────────────────────────────────────────────────┘│││ │
│  │  │  └─────────────────────────────────────────────────────────────┘││ │
│  │  └─────────────────────────────────────────────────────────────────┘│ │
│  └─────────────────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────────────────┘
```

## 🔄 Authentication Flow

```
┌──────────────┐     ┌───────────────┐     ┌──────────────────┐
│  Login Form  │────▶│ Supabase Auth │────▶│  Create Session  │
└──────────────┘     └───────────────┘     └──────────────────┘
                                                    │
                                                    ▼
┌──────────────┐     ┌───────────────┐     ┌──────────────────┐
│  Home Page   │◀────│  User Cookie  │◀────│   Set Cookies    │
└──────────────┘     └───────────────┘     └──────────────────┘
        │
        │
        ▼
┌──────────────┐     ┌───────────────┐     ┌──────────────────┐
│ getCurrUser  │────▶│ getUserByEmail│────▶│ WrapperComponent │
└──────────────┘     └───────────────┘     └──────────────────┘
```

## 🌐 Real-time Messaging Flow

```
┌──────────────┐     ┌───────────────┐     ┌──────────────────┐
│ ChatSender   │────▶│ sendMessage   │────▶│  Supabase Insert │
└──────────────┘     └───────────────┘     └──────────────────┘
                                                    │
                                                    ▼
┌──────────────┐     ┌───────────────┐     ┌──────────────────┐
│ ChatContainer│◀────│ Realtime Sub │◀────│  Database Update │
└──────────────┘     └───────────────┘     └──────────────────┘
        │
        │
        ▼
┌──────────────┐     ┌───────────────┐
│ SelfMessage  │     │ OtherMessage  │
└──────────────┘     └───────────────┘
```

## 🎨 Component Breakdown with Styling

### Main Layout Components

```
┌─────────────────────────────────────────────────────────────┐
│                      WrapperComponent                        │
│  ┌─────────────────┐  ┌─────────────────┐ ┌──────────────┐  │
│  │                 │  │                 │ │              │  │
│  │                 │  │                 │ │              │  │
│  │                 │  │                 │ │              │  │
│  │      List       │  │      Chat       │ │   Details    │  │
│  │                 │  │                 │ │              │  │
│  │                 │  │                 │ │              │  │
│  │                 │  │                 │ │              │  │
│  │                 │  │                 │ │              │  │
│  └─────────────────┘  └─────────────────┘ └──────────────┘  │
│  w-1/4 border-right   w-2/4 flex-grow     w-1/4 border-left│
└─────────────────────────────────────────────────────────────┘
  bg-main h-[90vh] w-[90vw] rounded-lg border-2 border-indigo-300/20
```

### List Component Structure

```
┌─────────────────────────────────────────────┐
│                  ListHead                    │
│  ┌─────────────┐  ┌─────────────────────┐   │
│  │ UserInfo    │  │ SearchAndAdd        │   │
│  └─────────────┘  └─────────────────────┘   │
├─────────────────────────────────────────────┤
│                                             │
│  ┌─────────────────────────────────────┐    │
│  │              ChatList                │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │         ChatItem            │    │    │
│  │  └─────────────────────────────┘    │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │         ChatItem            │    │    │
│  │  └─────────────────────────────┘    │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │         ChatItem            │    │    │
│  │  └─────────────────────────────┘    │    │
│  └─────────────────────────────────┘    │    │
│                                             │
└─────────────────────────────────────────────┘
```

### Chat Component Structure

```
┌─────────────────────────────────────────────┐
│                 ChatHead                     │
│  ┌─────────────┐  ┌─────────────────────┐   │
│  │ BackArrow   │  │ FriendInfo          │   │
│  └─────────────┘  └─────────────────────┘   │
├─────────────────────────────────────────────┤
│                                             │
│  ┌─────────────────────────────────────┐    │
│  │           ChatContainer             │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │       OtherMessage          │    │    │
│  │  └─────────────────────────────┘    │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │       SelfMessage           │    │    │
│  │  └─────────────────────────────┘    │    │
│  │  ┌─────────────────────────────┐    │    │
│  │  │       OtherMessage          │    │    │
│  │  └─────────────────────────────┘    │    │
│  └─────────────────────────────────┘    │    │
│                                             │
├─────────────────────────────────────────────┤
│               ChatSender                     │
│  ┌─────────────┐  ┌─────────┐ ┌─────────┐   │
│  │ Input Field │  │ Emojis  │ │ Send Btn│   │
│  └─────────────┘  └─────────┘ └─────────┘   │
└─────────────────────────────────────────────┘
```

## 📱 Responsive Behavior

```
┌─────────────────────────────────────────────────────────────┐
│ DESKTOP VIEW (> 1024px)                                     │
│  ┌─────────────┐  ┌─────────────────────┐ ┌──────────────┐  │
│  │    List     │  │        Chat         │ │    Details   │  │
│  │             │  │                     │ │              │  │
│  └─────────────┘  └─────────────────────┘ └──────────────┘  │
│      (25%)               (50%)                 (25%)        │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ TABLET VIEW (640px - 1024px)                                │
│  ┌─────────────┐  ┌─────────────────────────────────────┐   │
│  │    List     │  │                                     │   │
│  │             │  │                Chat                 │   │
│  │             │  │                                     │   │
│  └─────────────┘  └─────────────────────────────────────┘   │
│      (30%)                       (70%)                      │
└─────────────────────────────────────────────────────────────┘

┌─────────────────────────────────────────────────────────────┐
│ MOBILE VIEW (< 640px)                                       │
│  ┌─────────────────────────────────────────────────────┐    │
│  │                                                     │    │
│  │                  List OR Chat OR Details            │    │
│  │                  (Conditional Rendering)            │    │
│  │                                                     │    │
│  └─────────────────────────────────────────────────────┘    │
│                         (100%)                              │
└─────────────────────────────────────────────────────────────┘
```

## 🗃️ Database Schema Visualization

```
┌───────────────────────┐       ┌───────────────────────┐
│        users          │       │       messages         │
├───────────────────────┤       ├───────────────────────┤
│ id: uuid (PK)         │       │ id: uuid (PK)         │
│ email: string         │       │ text: string          │
│ display_name: string  │◀─┐    │ send_by: uuid (FK)    │
│ avatar_url: string    │  └───▶│ send_to: uuid (FK)    │
└───────────────────────┘       │ created_at: timestamp │
         ▲                      │ is_edit: boolean      │
         │                      └───────────────────────┘
         │                                ▲
         │                                │
┌───────────────────────┐                │
│       friends         │                │
├───────────────────────┤                │
│ id: uuid (PK)         │                │
│ user_id: uuid (FK)    │────────────────┘
│ friend_id: uuid (FK)  │
└───────────────────────┘
```

## 🔐 Authentication and Authorization

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                      Client Browser                           │
│                                                               │
└───────────────────────────┬───────────────────────────────────┘
                            │
                            ▼
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                       Next.js Server                          │
│                                                               │
└───────────────────────────┬───────────────────────────────────┘
                            │
                            ▼
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                      getCurrUser()                            │
│                                                               │
└───────────────────────────┬───────────────────────────────────┘
                            │
                            ▼
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                     Cookie Validation                         │
│                                                               │
└───────────────────────────┬───────────────────────────────────┘
                            │
                            ▼
                 ┌──────────────────────┐
                 │                      │
                 │   Valid Session?     │
                 │                      │
                 └──────────┬───────────┘
                            │
               ┌────────────┴─────────────┐
               │                          │
               ▼                          ▼
┌─────────────────────────┐    ┌─────────────────────────┐
│                         │    │                         │
│     Access Granted      │    │     Redirect to Login   │
│                         │    │                         │
└─────────────────────────┘    └─────────────────────────┘
```

## 🌍 Internationalization Flow

```
┌───────────────────────┐       ┌───────────────────────┐
│    Next.js Server     │       │    Client Browser     │
├───────────────────────┤       ├───────────────────────┤
│                       │       │                       │
│   getLocale()         │──────▶│  NextIntlProvider    │
│                       │       │                       │
└───────────────────────┘       └───────────┬───────────┘
                                            │
                                            ▼
                                ┌───────────────────────┐
                                │     UI Components     │
                                ├───────────────────────┤
                                │                       │
                                │  Translated Content   │
                                │                       │
                                └───────────────────────┘
```

## 🔄 State Management

```
┌───────────────────────────────────────────────────────────────┐
│                      Context Providers                        │
├───────────────────────┬───────────────────┬───────────────────┤
│                       │                   │                   │
│    UserProvider       │  ChattingProvider │  SettingsProvider │
│                       │                   │                   │
└─────────────┬─────────┴──────────┬────────┴─────────┬─────────┘
              │                    │                  │
              ▼                    ▼                  ▼
┌───────────────────┐  ┌───────────────────┐  ┌───────────────────┐
│                   │  │                   │  │                   │
│  Authentication   │  │  Chat Management  │  │  App Settings     │
│  - User Profile   │  │  - Messages       │  │  - Theme          │
│  - Login State    │  │  - Active Chat    │  │  - Language       │
│                   │  │  - Friends        │  │  - Notifications  │
└───────────────────┘  └───────────────────┘  └───────────────────┘
```

## 📦 File Organization Strategy

The project follows a feature-based organization with clear separation of concerns:

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                     Project Organization                      │
│                                                               │
├───────────────────┬───────────────────┬───────────────────────┤
│                   │                   │                       │
│   Core Features   │   UI Components   │   Utility Functions   │
│                   │                   │                       │
├───────────────────┼───────────────────┼───────────────────────┤
│                   │                   │                       │
│ - Authentication  │ - Chat UI         │ - Helpers            │
│ - Messaging       │ - List UI         │ - Hooks              │
│ - User Management │ - Details UI      │ - Context            │
│ - Friend System   │ - Common UI       │ - API                │
│                   │                   │                       │
└───────────────────┴───────────────────┴───────────────────────┘
```

## 🚀 Performance Optimization

```
┌───────────────────────────────────────────────────────────────┐
│                                                               │
│                    Performance Strategies                     │
│                                                               │
├───────────────────┬───────────────────┬───────────────────────┤
│                   │                   │                       │
│   Server-Side     │   Client-Side     │   Data Management     │
│                   │                   │                       │
├───────────────────┼───────────────────┼───────────────────────┤
│                   │                   │                       │
│ - Server Actions  │ - React.memo     │ - Efficient Queries   │
│ - SSR Components  │ - useCallback    │ - Data Pagination     │
│ - Edge Runtime    │ - useMemo        │ - Optimistic Updates  │
│ - Route Groups    │ - Code Splitting │ - Caching             │
│                   │                   │                       │
└───────────────────┴───────────────────┴───────────────────────┘
```

This enhanced visualization provides a comprehensive view of your Next.js chat application's architecture, component relationships, and data flow patterns.
